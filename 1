_G.ESP = false
_G.ESPName = false  -- Tính năng hiển thị tên
_G.ESPHealth = false  -- Tính năng hiển thị thanh máu và số máu
_G.ESPColor = Color3.fromRGB(255, 255, 255)
_G.NameColor = Color3.fromRGB(255, 255, 255)  -- Thêm màu cho ESP Name

pcall(
    function()
        local highlight = Instance.new("Highlight")

        game:GetService("RunService").RenderStepped:Connect(
            function()
                local camera = game.Workspace.CurrentCamera
                local localPlayer = game.Players.LocalPlayer

                for _, v in pairs(game.Players:GetPlayers()) do
                    if v == localPlayer then
                        continue
                    end

                    local character = v.Character
                    if not character then continue end

                    if not character:FindFirstChild("Highlight") then
                        highlight.FillTransparency = 1
                        highlight:Clone().Parent = character
                        highlight.OutlineColor = _G.ESPColor
                    end

                    if _G.ESPName and character:FindFirstChild("Head") and not character:FindFirstChild("ESPName") then
                        local billboard = Instance.new("BillboardGui")
                        billboard.Name = "ESPName"
                        billboard.Adornee = character:FindFirstChild("Head")
                        billboard.Size = UDim2.new(0, 100, 0, 30)
                        billboard.StudsOffset = Vector3.new(0, 2, 0)
                        billboard.AlwaysOnTop = true
                        billboard.Parent = character

                        local label = Instance.new("TextLabel")
                        label.Size = UDim2.new(1, 0, 1, 0)
                        label.Text = v.Name
                        label.TextColor3 = _G.NameColor
                        label.TextStrokeTransparency = 0.8
                        label.TextSize = 14
                        label.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
                        label.BackgroundTransparency = 1
                        label.Parent = billboard
                    end

                    if _G.ESPHealth and character:FindFirstChild("Humanoid") then
                        local humanoid = character:FindFirstChild("Humanoid")
                        local espHealth = character:FindFirstChild("ESPHealth")

                        if not espHealth then
                            local healthBar = Instance.new("BillboardGui")
                            healthBar.Name = "ESPHealth"
                            healthBar.Adornee = character:FindFirstChild("Head")
                            healthBar.Size = UDim2.new(0, 80, 0, 10)
                            healthBar.StudsOffset = Vector3.new(0, -3, 0)
                            healthBar.AlwaysOnTop = true
                            healthBar.Parent = character

                            local frame = Instance.new("Frame")
                            frame.Size = UDim2.new(1, 0, 1, 0)
                            frame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                            frame.Parent = healthBar

                            local healthFill = Instance.new("Frame")
                            healthFill.Name = "HealthFill"
                            healthFill.Size = UDim2.new(humanoid.Health / humanoid.MaxHealth, 0, 1, 0)
                            healthFill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                            healthFill.Parent = frame
                        else
                            local healthFill = espHealth:FindFirstChild("Frame"):FindFirstChild("HealthFill")
                            if healthFill then
                                healthFill.Size = UDim2.new(humanoid.Health / humanoid.MaxHealth, 0, 1, 0)
                            end
                        end
                    end
                end
            end
        )
    end
)

local library = loadstring(game:HttpGet(("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wall%20v3")))()

local w = library:CreateWindow("ServiceGame ESP")
local b = w:CreateFolder("Main")

b:Toggle("Chams", function(bool) _G.ESP = bool end)
b:Toggle("ESP Name", function(bool) _G.ESPName = bool end)
b:Toggle("ESP Health", function(bool) _G.ESPHealth = bool end)
b:ColorPicker("Name Color", Color3.fromRGB(255, 255, 255), function(color) _G.NameColor = color end)
b:ColorPicker("Color", Color3.fromRGB(255, 255, 255), function(color) _G.ESPColor = color end)
